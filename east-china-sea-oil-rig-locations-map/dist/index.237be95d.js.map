{"mappings":"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","sources":["src/js/map.js"],"sourcesContent":["var basemap = L.tileLayer(\n  \"https://api.mapbox.com/styles/v1/ilabmedia/cj84s9bet10f52ro2lrna50yg/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiaWxhYm1lZGlhIiwiYSI6ImNpbHYycXZ2bTAxajZ1c2tzdWU1b3gydnYifQ.AHxl8pPZsjsqoz95-604nw\",\n  {}\n);\n\nvar map = L.map(\"map\", {\n  center: [30.27, 125.05],\n  zoom: 6,\n  maxZoom: 9,\n  scrollWheelZoom: true,\n  minZoom: 1,\n  zoomControl: true,\n  scrollWheelZoom: true,\n  layers: [basemap],\n  attributionControl: false,\n});\n\nconst client = new carto.Client({\n  apiKey: \"d04CdzdOaRbyl8fgmt7wHQ\",\n  username: \"csis\",\n});\n\nconst clientChinaShelf = new carto.Client({\n  apiKey: \"VgCKCvaxBiG8EizMoaXPZQ\",\n  username: \"csis\",\n});\n\nconst clientJapanShelf = new carto.Client({\n  apiKey: \"Csd-n3r-MxX5FVkeNqeWoQ\",\n  username: \"csis\",\n});\n\nconst clientJointDevelopmentZone = new carto.Client({\n  apiKey: \"8Rsd_jhMzTGj7MriFytmQg\",\n  username: \"csis\",\n});\n\nconst mapSource = new carto.source.SQL(\n  `SELECT * FROM east_china_sea_oil_rig_locations_map ORDER BY cartodb_id DESC`\n);\n\nconst chinaContinentalShelfSource = new carto.source.SQL(\n  `SELECT * FROM china_continental_shelf_line`\n);\n\nconst japanContinentalShelfSource = new carto.source.SQL(\n  `SELECT * FROM japan_continental_shelf_line`\n);\n\nconst joinDevelopmentZoneSource = new carto.source.SQL(\n  `SELECT * FROM joint_development_zone_line`\n);\n\nconst mapStyle = new carto.style.CartoCSS(`\n  #layer {\n  marker-width: 16;\n  marker-fill: ramp([rig_name], (#63a7ec, #63a7ec, #63a7ec, #63a7ec, #7d4391, #63a7ec, #63a7ec, #63a7ec, #63a7ec, #63a7ec, #63a7ec), (\"Oriental Discovery\", \"Platform #1 \", \"Platform #11\", \"Platform #12\", \"Platform #13\", \"Platform #2\", \"Platform #3\", \"Platform #4\", \"Platform #5\", \"Platform #6\"), \"=\");\n  marker-fill-opacity: 1;\n  marker-allow-overlap: true;\n  marker-line-width: 1;\n  marker-line-color: #FFFFFF;\n  marker-line-opacity: 1;\n  }\n`);\n\nconst chinaContinentalShelfStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 1.5;\n    line-color: #0078b2;\n    line-opacity: 1;\n  }\n`);\n\nconst japanContinentalShelfStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 1.5;\n    line-color: #caa16d;\n    line-opacity: 1;\n  }\n`);\n\nconst joinDevelopmentZoneStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 6;\n    line-color: #0c8d79;\n    line-opacity: 1;\n  }\n`);\n\nconst mapLayer = new carto.layer.Layer(mapSource, mapStyle, {\n  featureOverColumns: [\"rig_name\", \"new_or_old\"],\n});\n\nconst mapLayerChinaShelf = new carto.layer.Layer(\n  chinaContinentalShelfSource,\n  chinaContinentalShelfStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nconst mapLayerJapanShelf = new carto.layer.Layer(\n  japanContinentalShelfSource,\n  japanContinentalShelfStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nconst mapLayerJoinDevelopmentZone = new carto.layer.Layer(\n  joinDevelopmentZoneSource,\n  joinDevelopmentZoneStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nclient.addLayer(mapLayer);\nclientChinaShelf.addLayer(mapLayerChinaShelf);\nclientJapanShelf.addLayer(mapLayerJapanShelf);\nclientJointDevelopmentZone.addLayer(mapLayerJoinDevelopmentZone);\n\nclient.getLeafletLayer().bringToFront().addTo(map);\nclientChinaShelf.getLeafletLayer().bringToFront().addTo(map);\nclientJapanShelf.getLeafletLayer().bringToFront().addTo(map);\nclientJointDevelopmentZone.getLeafletLayer().bringToFront().addTo(map);\n\nconst sidePanel = L.popup({ closeButton: true });\n\nmapLayer.on(carto.layer.events.FEATURE_CLICKED, createSidePanel);\n\nfunction createSidePanel(event) {\n  sidePanel.setLatLng(event.latLng);\n\n  const panel = document.querySelector('.panel');\n  const panelContent = document.querySelector('.panel-content');\n  panel.classList.add('open');\n\n  if (!sidePanel.isOpen()) {\n    var data = event.data;\n    var content = '';\n\n    content += `\n    <h2 class=\"sidePanelHeaderStyle\">\n      ${data.rig_name}\n    </h2>\n    <p class=\"side-panel-value\">Description: <span>${data.new_or_old}</span> </p>\n    `;\n    // if (data.source) {\n    //   content += `<p class=\"side-panel-value\"><span class=\"source\">${data.source}</span> </p>`\n    // }\n    // content +=\n    // `\n    // <p class=\"side-panel-value\">Focus Areas: <span>${data.focus_areas}</span> </p>\n    // <p class=\"side-panel-value\">Major Recipients: <span>${data.major_recipients}</span> </p>\n    // <p class=\"side-panel-link\">For more details, click <a href=\"https://docs.google.com/spreadsheets/d/e/2PACX-1vTxYNVcd_DsRaJzHo6c3dN78Y9uOypX2jX4VzEaJZpgX_t9qXFfCzNENobD7aFXB-HeVawqjFXtslKI/pubhtml\" target=\"_blank\">here</a>.</p>\n    // `;\n    panelContent.innerHTML = content;\n  }\n}\n\nconst closeBtn = document.querySelector('.close-btn');\ncloseBtn.addEventListener('click', function(e) {\n  const panel = document.querySelector('.panel');\n  panel.classList.remove('open');\n})\n\nL.control\n  .attribution({\n    position: \"bottomright\",\n  })\n  .setPrefix(\n    '<a href=\"https://amti.csis.org/\">CSIS - AMTI</a>, <a href=\"https://leafletjs.com/\">Leaflet</a>'\n  )\n  .addTo(map);\n"],"names":[],"version":3,"file":"index.237be95d.js.map","sourceRoot":"/__parcel_source_root/"}
{"mappings":"AAAA,IAAIA,QAAUC,EAAEC,UACd,0MACA,IAGEC,IAAMF,EAAEE,IAAI,MAAO,CACrBC,OAAQ,CAAC,MAAO,QAChBC,KAAM,EACNC,QAAS,EACTC,iBAAiB,EACjBC,QAAS,EACTC,aAAa,EACbF,iBAAiB,EACjBG,OAAQ,CAACV,SACTW,oBAAoB,IAGtB,MAAMC,OAAS,IAAIC,MAAMC,OAAO,CAC9BC,OAAQ,yBACRC,SAAU,SAGNC,iBAAmB,IAAIJ,MAAMC,OAAO,CACxCC,OAAQ,yBACRC,SAAU,SAGNE,iBAAmB,IAAIL,MAAMC,OAAO,CACxCC,OAAQ,yBACRC,SAAU,SAGNG,2BAA6B,IAAIN,MAAMC,OAAO,CAClDC,OAAQ,yBACRC,SAAU,SAGNI,UAAY,IAAIP,MAAMQ,OAAOC,IACjC,+EAGIC,4BAA8B,IAAIV,MAAMQ,OAAOC,IACnD,8CAGIE,4BAA8B,IAAIX,MAAMQ,OAAOC,IACnD,8CAGIG,0BAA4B,IAAIZ,MAAMQ,OAAOC,IACjD,6CAGII,SAAW,IAAIb,MAAMc,MAAMC,SAAS,weAYpCC,2BAA6B,IAAIhB,MAAMc,MAAMC,SAAS,6FAQtDE,2BAA6B,IAAIjB,MAAMc,MAAMC,SAAS,6FAQtDG,yBAA2B,IAAIlB,MAAMc,MAAMC,SAAS,2FAQpDI,SAAW,IAAInB,MAAMoB,MAAMC,MAAMd,UAAWM,SAAU,CAC1DS,mBAAoB,CAAC,WAAY,gBAG7BC,mBAAqB,IAAIvB,MAAMoB,MAAMC,MACzCX,4BACAM,2BACA,CACEM,mBAAoB,CAAC,UAInBE,mBAAqB,IAAIxB,MAAMoB,MAAMC,MACzCV,4BACAM,2BACA,CACEK,mBAAoB,CAAC,UAInBG,4BAA8B,IAAIzB,MAAMoB,MAAMC,MAClDT,0BACAM,yBACA,CACEI,mBAAoB,CAAC,UAIzBvB,OAAO2B,SAASP,UAChBf,iBAAiBsB,SAASH,oBAC1BlB,iBAAiBqB,SAASF,oBAC1BlB,2BAA2BoB,SAASD,6BAEpC1B,OAAO4B,kBAAkBC,eAAeC,MAAMvC,KAC9Cc,iBAAiBuB,kBAAkBC,eAAeC,MAAMvC,KACxDe,iBAAiBsB,kBAAkBC,eAAeC,MAAMvC,KACxDgB,2BAA2BqB,kBAAkBC,eAAeC,MAAMvC,KAElE,MAAMwC,UAAY1C,EAAE2C,MAAM,CAAEC,aAAa,IAIzC,SAASC,gBAAgBC,GACvBJ,UAAUK,UAAUD,EAAME,QAE1B,MAAMC,EAAQC,SAASC,cAAc,UAC/BC,EAAeF,SAASC,cAAc,kBAG5C,GAFAF,EAAMI,UAAUC,IAAI,SAEfZ,UAAUa,SAAU,CACvB,IAAIC,EAAOV,EAAMU,KACbC,EAAU,GAEdA,GAAW,kDAEPD,EAAKE,2EAEwCF,EAAKG,+BAWtDP,EAAaQ,UAAYH,C,EA5B7B1B,SAAS8B,GAAGjD,MAAMoB,MAAM8B,OAAOC,gBAAiBlB,iBAgChD,MAAMmB,SAAWd,SAASC,cAAc,cACxCa,SAASC,iBAAiB,SAAS,SAASC,GAC5BhB,SAASC,cAAc,UAC/BE,UAAUc,OAAO,O,IAGzBnE,EAAEoE,QACCC,YAAY,CACXC,SAAU,gBAEXC,UACC,kGAED9B,MAAMvC","sources":["src/js/index.js"],"sourcesContent":["var basemap = L.tileLayer(\n  \"https://api.mapbox.com/styles/v1/ilabmedia/cj84s9bet10f52ro2lrna50yg/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiaWxhYm1lZGlhIiwiYSI6ImNpbHYycXZ2bTAxajZ1c2tzdWU1b3gydnYifQ.AHxl8pPZsjsqoz95-604nw\",\n  {}\n);\n\nvar map = L.map(\"map\", {\n  center: [30.27, 125.05],\n  zoom: 6,\n  maxZoom: 9,\n  scrollWheelZoom: true,\n  minZoom: 1,\n  zoomControl: true,\n  scrollWheelZoom: true,\n  layers: [basemap],\n  attributionControl: false,\n});\n\nconst client = new carto.Client({\n  apiKey: \"d04CdzdOaRbyl8fgmt7wHQ\",\n  username: \"csis\",\n});\n\nconst clientChinaShelf = new carto.Client({\n  apiKey: \"VgCKCvaxBiG8EizMoaXPZQ\",\n  username: \"csis\",\n});\n\nconst clientJapanShelf = new carto.Client({\n  apiKey: \"Csd-n3r-MxX5FVkeNqeWoQ\",\n  username: \"csis\",\n});\n\nconst clientJointDevelopmentZone = new carto.Client({\n  apiKey: \"8Rsd_jhMzTGj7MriFytmQg\",\n  username: \"csis\",\n});\n\nconst mapSource = new carto.source.SQL(\n  `SELECT * FROM east_china_sea_oil_rig_locations_map ORDER BY cartodb_id DESC`\n);\n\nconst chinaContinentalShelfSource = new carto.source.SQL(\n  `SELECT * FROM china_continental_shelf_line`\n);\n\nconst japanContinentalShelfSource = new carto.source.SQL(\n  `SELECT * FROM japan_continental_shelf_line`\n);\n\nconst joinDevelopmentZoneSource = new carto.source.SQL(\n  `SELECT * FROM joint_development_zone_line`\n);\n\nconst mapStyle = new carto.style.CartoCSS(`\n  #layer {\n  marker-width: 16;\n  marker-fill: ramp([rig_name], (#63a7ec, #63a7ec, #63a7ec, #63a7ec, #7d4391, #63a7ec, #63a7ec, #63a7ec, #63a7ec, #63a7ec, #63a7ec), (\"Oriental Discovery\", \"Platform #1 \", \"Platform #11\", \"Platform #12\", \"Platform #13\", \"Platform #2\", \"Platform #3\", \"Platform #4\", \"Platform #5\", \"Platform #6\"), \"=\");\n  marker-fill-opacity: 1;\n  marker-allow-overlap: true;\n  marker-line-width: 1;\n  marker-line-color: #FFFFFF;\n  marker-line-opacity: 1;\n  }\n`);\n\nconst chinaContinentalShelfStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 1.5;\n    line-color: #0078b2;\n    line-opacity: 1;\n  }\n`);\n\nconst japanContinentalShelfStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 1.5;\n    line-color: #caa16d;\n    line-opacity: 1;\n  }\n`);\n\nconst joinDevelopmentZoneStyle = new carto.style.CartoCSS(`\n  #layer {\n    line-width: 6;\n    line-color: #0c8d79;\n    line-opacity: 1;\n  }\n`);\n\nconst mapLayer = new carto.layer.Layer(mapSource, mapStyle, {\n  featureOverColumns: [\"rig_name\", \"new_or_old\"],\n});\n\nconst mapLayerChinaShelf = new carto.layer.Layer(\n  chinaContinentalShelfSource,\n  chinaContinentalShelfStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nconst mapLayerJapanShelf = new carto.layer.Layer(\n  japanContinentalShelfSource,\n  japanContinentalShelfStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nconst mapLayerJoinDevelopmentZone = new carto.layer.Layer(\n  joinDevelopmentZoneSource,\n  joinDevelopmentZoneStyle,\n  {\n    featureOverColumns: [\"name\"],\n  }\n);\n\nclient.addLayer(mapLayer);\nclientChinaShelf.addLayer(mapLayerChinaShelf);\nclientJapanShelf.addLayer(mapLayerJapanShelf);\nclientJointDevelopmentZone.addLayer(mapLayerJoinDevelopmentZone);\n\nclient.getLeafletLayer().bringToFront().addTo(map);\nclientChinaShelf.getLeafletLayer().bringToFront().addTo(map);\nclientJapanShelf.getLeafletLayer().bringToFront().addTo(map);\nclientJointDevelopmentZone.getLeafletLayer().bringToFront().addTo(map);\n\nconst sidePanel = L.popup({ closeButton: true });\n\nmapLayer.on(carto.layer.events.FEATURE_CLICKED, createSidePanel);\n\nfunction createSidePanel(event) {\n  sidePanel.setLatLng(event.latLng);\n\n  const panel = document.querySelector('.panel');\n  const panelContent = document.querySelector('.panel-content');\n  panel.classList.add('open');\n\n  if (!sidePanel.isOpen()) {\n    var data = event.data;\n    var content = '';\n\n    content += `\n    <h2 class=\"sidePanelHeaderStyle\">\n      ${data.rig_name}\n    </h2>\n    <p class=\"side-panel-value\">Description: <span>${data.new_or_old}</span> </p>\n    `;\n    // if (data.source) {\n    //   content += `<p class=\"side-panel-value\"><span class=\"source\">${data.source}</span> </p>`\n    // }\n    // content +=\n    // `\n    // <p class=\"side-panel-value\">Focus Areas: <span>${data.focus_areas}</span> </p>\n    // <p class=\"side-panel-value\">Major Recipients: <span>${data.major_recipients}</span> </p>\n    // <p class=\"side-panel-link\">For more details, click <a href=\"https://docs.google.com/spreadsheets/d/e/2PACX-1vTxYNVcd_DsRaJzHo6c3dN78Y9uOypX2jX4VzEaJZpgX_t9qXFfCzNENobD7aFXB-HeVawqjFXtslKI/pubhtml\" target=\"_blank\">here</a>.</p>\n    // `;\n    panelContent.innerHTML = content;\n  }\n}\n\nconst closeBtn = document.querySelector('.close-btn');\ncloseBtn.addEventListener('click', function(e) {\n  const panel = document.querySelector('.panel');\n  panel.classList.remove('open');\n})\n\nL.control\n  .attribution({\n    position: \"bottomright\",\n  })\n  .setPrefix(\n    '<a href=\"https://amti.csis.org/\">CSIS - AMTI</a>, <a href=\"https://leafletjs.com/\">Leaflet</a>'\n  )\n  .addTo(map);\n"],"names":["basemap","L","tileLayer","map","center","zoom","maxZoom","scrollWheelZoom","minZoom","zoomControl","layers","attributionControl","client","carto","Client","apiKey","username","clientChinaShelf","clientJapanShelf","clientJointDevelopmentZone","mapSource","source","SQL","chinaContinentalShelfSource","japanContinentalShelfSource","joinDevelopmentZoneSource","mapStyle","style","CartoCSS","chinaContinentalShelfStyle","japanContinentalShelfStyle","joinDevelopmentZoneStyle","mapLayer","layer","Layer","featureOverColumns","mapLayerChinaShelf","mapLayerJapanShelf","mapLayerJoinDevelopmentZone","addLayer","getLeafletLayer","bringToFront","addTo","sidePanel","popup","closeButton","createSidePanel","event","setLatLng","latLng","panel","document","querySelector","panelContent","classList","add","isOpen","data","content","rig_name","new_or_old","innerHTML","on","events","FEATURE_CLICKED","closeBtn","addEventListener","e","remove","control","attribution","position","setPrefix"],"version":3,"file":"index.c844dd8c.js.map"}
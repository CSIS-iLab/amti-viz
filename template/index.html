<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" rel="stylesheet">

  <!-- Share meta -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="article" />
  <meta property="og:image:width" content="2000" />
  <meta property="og:image:height" content="1333" />
  <meta name="twitter:card" content="summary" />

  <!-- Include Leaflet -->
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>

  <!-- Include markerCluster plugin -->
  <script src='https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js'></script>

  <!--  Dropdown -->
  <script src="https://cdn.jsdelivr.net/npm/choices.js@4/public/assets/scripts/choices.min.js"></script>

  <!-- Include Pattern plugin -->
  <script src="js/vendor/patterns.js"></script>

  <!-- Include Zoom Slider plugin -->
  <script src="js/vendor/zoomslider.js"></script>

  <!-- Include Diacritics plugin -->
  <script src="js/vendor/latinize.js"></script>

  <!-- Include Chroma colors plugin -->
  <script src="js/vendor/chroma.js"></script>

  <!--  Babel/Promise/Fetch Polyfills -->
  <script src="js/vendor/polyfills.js"></script>


  <link href="css/vendor.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">


</head>

<body>




  <script src="js/makeMap.js"></script>
  <script>
    var maps = [
      {
        id: "claims-map",
        sheet: "14MvucMac-lYCu0-2vD5tcxfCUqIJog2h4-REFkpH3Kw",
        "popup headers": [
          lang ? "name_" + lang : "name",
          lang ? "description_" + lang : "description",
          "link"
        ]
      }
      ,
      {
        id: "venezuela",
        sheet: "13tvoxc7kB8BzSKO67c6kf949kqte_o-WFF5W21h5O98",
      }
      ,
        {
          id: "features-map",
          sheet: "1REFNJ8WZ9fOzShYC8SpUJ7pZQEMkWlqzC2KpMb-wSyc"
        }
        ,
        {
          id: "resources-map",
          sheet: "11rUaoISSkqakEKZ6hi4xeVbbiEnfPi1qsRoq4r0SrPA",
          "popup headers": [
            lang ? "name_" + lang : "name",
            lang ? "description_" + lang : "description",
            "link"
          ]
        }
        ,
        {
        id: "aegis",
        sheet: "15oJSmk0KW3_5D8Uj1eSiz-e-PpW51e9N-XSgLIQtZIk",
      }
      ,
      {
        id:"wbi-terrorism",
        sheet:"1d4Ee65KT_S46x0mk62sV6CYDpMZ40c2oYJ6BQs9a_10"
      }

    ];

    maps.reverse().forEach((map, i) => {
      var mapboxStyle =
        lang && lang.indexOf("zh-") > -1 ?
        (mapboxStyle = "citui3waw00162jo1zcsf1urj") :
        (mapboxStyle = "cj84s9bet10f52ro2lrna50yg");



      setTimeout(() => {
        console.log("another one");
        makeMap({
          mapID: map.id,
          googleSheet: map.sheet,
          "mapbox style": map.id === "aegis" ? "cjoiv6dmo29kh2rsd2z5qda2p" : map.id ===
          "venezuela" || map.id === "wbi-terrorism" ? "cjrawc1zs2bzc2sq3y9wvt22t" : mapboxStyle,
          "ocean color": "#cad2d3",
          "popup headers": map["popup headers"], // Array
          // "popup content": [],
          // pointStyle: function(feature,latlng){},
          // nonPointStyle: function(feature){},
          // onEachFeature: {
          // click: function(feature, layer){}
          // dbclick: function(feature, layer, map){},
          // mousedown: function(feature, layer, map){},
          // mouseenter: function(feature, layer, map){},
          // mouseout: function(feature, layer, map){}
          // },
          formatPopupContent: map.id === "aegis" ? function(feature, map) {
            return `<div class="popupTitleStyle">${feature.properties.name}</div>

            ${
              feature.properties.total_guided_missile_cruisers
                ? `<div class="popupHeaderStyle">Guided Missile Cruisers: ${
                    feature.properties.total_guided_missile_cruisers
                  }</div>
            <div><span class='popupEntryStyle'>BMD-Capable:</span>
            <span class='popupEntryStyle'>${feature.properties.bmd_capable_gmc}</span></div>`
                : ""
            }
        ${
            feature.properties.total_guided_missile_destroyers
              ? `<div class="popupHeaderStyle">Guided Missile Destroyers: ${
                  feature.properties.total_guided_missile_destroyers
                }</div>
        <div><span class='popupEntryStyle'>BMD-Capable:</span>
        <span class='popupEntryStyle'>${feature.properties.total_guided_missile_destroyers}</span></div>`
              : ""
          }`
          } : map.id === "venezuela" ? function(feature, map) {
            return '<div class="popupHeaderStyle">' +
              feature.properties.country +
              '</div><div class="popupEntryStyle">' +
              (feature.properties.recognition.toLowerCase() === "y" ? feature.properties.country + " recognizes Juan Guaid\xF3 as President of Venezuela" : feature.properties.country +
                " recognizes Nicol\xE1s Maduro as President of Venezuela</div>") +
              "</div>"
          } : null
        });
      }, 2000 * i);
    });
  </script>


  <style>
    .leaflet-popup-tip,
    .leaflet-popup-content-wrapper {
      color: #fff;
      background-color: rgba(47, 82, 98, 0.85);
    }

  </style>





</body>

</html>

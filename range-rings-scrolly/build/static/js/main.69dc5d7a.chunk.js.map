{"version":3,"sources":["App.js","serviceWorker.js","config.js","index.js"],"names":["layerTypes","alignments","transformRequest","url","hasQuery","indexOf","Chapter","id","theme","title","image","description","list1","list2","list3","list4","subtitle","classList","currentChapterID","className","src","alt","App","props","state","currentChapter","chapters","config","this","mapStart","location","mapboxgl","accessToken","map","Map","container","mapContainer","style","center","zoom","pitch","bearing","marker","Marker","setLayerOpacity","layer","layerType","getLayer","type","getLayerPaintType","forEach","prop","setPaintProperty","opacity","showMarkers","setLngLat","addTo","setState","bind","scroller","scrollama","on","setup","step","offset","progress","onStepEnter","response","chapter","find","chap","element","flyTo","onChapterEnter","length","onStepExit","onChapterExit","window","addEventListener","resize","ref","el","byline","alignment","key","footer","href","target","rel","Component","Boolean","hostname","match","logo","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.69dc5d7a.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl';\nimport scrollama from 'scrollama';\n\nconst layerTypes = {\n    'fill': ['fill-opacity'],\n    'line': ['line-opacity'],\n    'circle': ['circle-opacity', 'circle-stroke-opacity'],\n    'symbol': ['icon-opacity', 'text-opacity'],\n    'raster': ['raster-opacity'],\n    'fill-extrusion': ['fill-extrusion-opacity']\n}\n\nconst alignments = {\n    'left': 'lefty',\n    'center': 'centered',\n    'right': 'righty'\n}\n\nconst transformRequest = (url) => {\n    const hasQuery = url.indexOf(\"?\") !== -1;\n    const suffix = hasQuery ? \"&pluginName=journalismScrollytelling\" : \"?pluginName=journalismScrollytelling\";\n    return {\n        url: url + suffix\n    }\n}\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentChapter: props.chapters[0]\n        };\n        // this.setState = this.setState.bind(this);\n    }\n\n    componentDidMount() {\n        const config = this.props;\n        const mapStart = config.chapters[0].location;\n\n        mapboxgl.accessToken = config.accessToken;\n\n        const map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: config.style,\n            center: mapStart.center,\n            zoom: mapStart.zoom,\n            pitch: mapStart.pitch,\n            bearing: mapStart.bearing,\n            transformRequest: transformRequest\n        });\n\n        const marker = new mapboxgl.Marker();\n        if (config.showMarkers) {\n            marker.setLngLat(mapStart.center).addTo(map);\n        }\n\n        function getLayerPaintType(layer) {\n            var layerType = map.getLayer(layer).type;\n            return layerTypes[layerType];\n        }\n\n        function setLayerOpacity(layer) {\n            var paintProps = getLayerPaintType(layer.layer);\n            paintProps.forEach(function (prop) {\n                map.setPaintProperty(layer.layer, prop, layer.opacity);\n            });\n        }\n\n\n        const setState = this.setState.bind(this);\n\n        // instantiate the scrollama\n        const scroller = scrollama();\n\n        map.on('load', function () {\n\n            // setup the instance, pass callback functions\n            scroller\n                .setup({\n                    step: '.step',\n                    offset: 0.5,\n                    progress: true\n                })\n                .onStepEnter(response => {\n                    const chapter = config.chapters.find(chap => chap.id === response.element.id);\n                    setState({ currentChapter: chapter });\n                    map.flyTo(chapter.location);\n                    if (config.showMarkers) {\n                        marker.setLngLat(chapter.location.center);\n                    }\n                    if (chapter.onChapterEnter.length > 0) {\n                        chapter.onChapterEnter.forEach(setLayerOpacity);\n                    }\n                })\n                .onStepExit(response => {\n                    var chapter = config.chapters.find(chap => chap.id === response.element.id);\n                    if (chapter.onChapterExit.length > 0) {\n                        chapter.onChapterExit.forEach(setLayerOpacity);\n                    }\n                });\n        });\n\n        window.addEventListener('resize', scroller.resize);\n    }\n\n    render() {\n        const config = this.props;\n        const theme = config.theme;\n        const currentChapterID = this.state.currentChapter.id;\n        return (\n            <div>\n                <div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" />\n                <div id=\"story\">\n                    {config.title &&\n                        <div id=\"header\" className={theme}>\n                            {/* <h1>{config.title}</h1> */}\n                            {config.subtitle &&\n                                <h2>{config.subtitle}</h2>\n                            }\n                            {config.byline && \n                                <p>{config.byline}</p>\n                            }\n                        </div>\n                    }\n                    <div id=\"features\" className={alignments[config.alignment]}>\n                        {\n                            config.chapters.map(chapter =>\n                                <Chapter key={chapter.id} theme={theme} {...chapter} currentChapterID={currentChapterID} />\n                            )\n                        }\n                    </div>\n                    {config.footer && \n                        <div id=\"footer\" className={theme}>\n                            <p>{config.footer}</p>\n                            <a href=\"https://www.csis.org/tradecommission\" alt=\"Trade Commission website\"  target=\"_blank\" rel=\"noopener noreferrer\" className=\"trade-logo\">\n                            </a>\n                        </div>\n                    }\n\n                </div>\n            </div>\n        );\n    }\n\n}\n\n\n\nfunction Chapter({ id, theme, title, image, description, list1, list2, list3, list4, subtitle, currentChapterID }) {\n    const classList = id === currentChapterID ? \"step active\" : \"step\";\n    return (\n        <div id={id} className={classList}>\n            <div className={theme}>\n                {/* {title &&\n                    <h2 className=\"title\">{title}</h2>\n                } */}\n                <div className=\"content\">\n                    {subtitle &&\n                        <h3 className=\"subtitle\">{subtitle}</h3>\n                    }\n                    {description &&\n                        <p className=\"desc\">{description}</p>\n                    }\n                    <ul>\n                      {list1 && \n                          <li className=\"list\">{list1}</li>\n                      }\n                      {list2 && \n                          <li className=\"list\">{list2}</li>\n                      }\n                      {list3 && \n                          <li className=\"list\">{list3}</li>\n                      }\n                      {list4 && \n                          <li className=\"list\">{list4}</li>\n                      }\n                    </ul>\n                    {image &&\n                        <img src={image} alt={title}></img>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","var config = {\n    style: \"mapbox://styles/ilabmedia/ckjvjizi20pg019lxvzwcg20h\",\n    accessToken: \"pk.eyJ1IjoiaWxhYm1lZGlhIiwiYSI6ImNpbHYycXZ2bTAxajZ1c2tzdWU1b3gydnYifQ.AHxl8pPZsjsqoz95-604nw\",\n    showMarkers: false,\n    alignment: 'left',\n    theme: 'light',\n    title: 'Range Rings Scrolly Map',\n    subtitle: '',\n    byline: 'Produced by CSIS iDeas Lab and the CSIS Asia Maritime Transparency Initaitve ',\n    logo: '',\n    footer: 'Source: Data from | ',\n    chapters: [\n        {\n            id: 'a-scs-islands',\n            title: 'China controls 4 bases with runways in the SCS.',\n            subtitle: '',\n            image: '',\n            description: `China controls 4 bases with runways in the SCS.`,\n            location: {\n                center: [112.09, 16.30],\n                zoom: 4.50,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n               {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 0\n                }\n            ]\n        },\n        // {\n        //     id: 'sat-imag',\n        //     title: 'China controls 4 bases with runways in the SCS.',\n        //     subtitle: '',\n        //     image: '',\n        //     description: `China controls 4 bases with runways in the SCS.`,\n        //     location: {\n        //         center: [112.09, 16.30],\n        //         zoom: 4.50,\n        //         pitch: 0.00,\n        //         bearing: 0.00\n        //     },\n        //     onChapterEnter: [\n        //        {\n        //             layer: 'a-china-scs-runway-islands',\n        //             opacity: 1\n        //         }\n        //     ],\n        //     onChapterExit: [\n        //         {\n        //             layer: 'a-china-scs-runway-islands',\n        //             opacity: 0\n        //         }\n        //     ]\n        // },\n        {\n            id: 'b-fighter-range',\n            title: '[map with ISLANDS(a) + FIGHTER MAX RANGE(b))',\n            image: '',\n            description: `The range of combat aircraft from these islands is quite far.`,\n            location: {\n                center: [110.09, 22.30],\n                zoom: 3.50,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 1\n                },\n                {\n                    layer: 'b-fighter-max-combat-range',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 0\n                },\n                {\n                    layer: 'b-fighter-max-combat-range',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'a-c-islands',\n            title: '[map with ISLANDS(a) + KJ-500 RANGE FROM ISLAND SAMS(c))',\n            subtitle: '',\n            image: '',\n            description: `But in reality, combat aircraft are limited to operating within radar range. Without external radar coverage, they have limited awareness of their surroundings and would be vulnerable to attack.`,\n            location: {\n                center: [110.09, 22.30],\n                zoom: 4.00,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 1\n                },\n                {\n                    layer: 'c-kj500-under-sam-to-surface',\n                    opacity: 1\n                },\n\n            ],\n            onChapterExit: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 0\n                },\n                {\n                    layer: 'c-kj500-under-sam-to-surface',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'd-e',\n            title: ' [KJ-500 maximum range(F)]',\n            subtitle: '',\n            image: '',\n            description: `The KJ-500 has a huge maximum travel range 3000km…`,\n            location: {\n                center: [110.09, 22.30],\n                zoom: 4.00,\n                pitch: 0.00,\n                bearing: 0.00,\n                // speed: 0.05\n            },\n            onChapterEnter: [\n                {\n                    layer: 'd-kj500-single-subi',\n                    opacity: 1\n                },\n                {\n                    layer: 'e-kj-500-single-from-mischief',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'd-kj500-single-subi',\n                    opacity: 0\n                },\n                {\n                    layer: 'e-kj-500-single-from-mischief',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'f-kj-500',\n            title: `[mischief reef SAM range(G)]`,\n            subtitle: '',\n            image: '',\n            description: `The KJ-500 has a huge maximum travel range 3000km...`,\n            location: {\n                center: [0.00, 46.50],\n                zoom: 1.00,\n                pitch: 0.00,\n                bearing: 0.00,\n            },\n            onChapterEnter: [\n                {\n                    layer: 'f-kj500-max-range-from-mischief',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'f-kj500-max-range-from-mischief',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'g-sam-range',\n            title: `mischief reef SAM range(G)`,\n            subtitle: '',\n            image: '',\n            description: `But, like the fighters, they are limited to operating within only a fraction of it. This is because they need to be covered by SAM and ASMs to defend them against potential attack.`,\n            location: {\n                center: [110.87, 8.38],\n                zoom: 5,\n                pitch: 0.00,\n                bearing: 0.00,\n            },\n            onChapterEnter: [\n                {\n                    layer: 'g-sam-range-from-mischief',\n                    opacity: 1,\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'g-sam-range-from-mischief',\n                    opacity: 0\n                }\n            ]\n        },\n\n\n\n        {\n            id: 'services5',\n            title: '[KJ-500 sensing range from island SAMS(c) + fighter weapons range from island KJ-500 (S)]',\n            subtitle: '',\n            image: '',\n            description: `This range, the estimated sensing range of KJ-500 aircraft operating within SAM coverage from the islands, represents the practical limit of power projection from the islands themselves. Combat aircraft wouldn’t be able to operate outside of this range without incurring extreme risk.`,\n            location: {\n                center: [110.09, 15.30],\n                zoom: 4.00,\n                pitch: 0.00,\n                bearing: 0.00,\n            },\n            onChapterEnter: [\n                {\n                    layer: 'c-kj500-under-sam-to-surface',\n                    opacity: 1\n                },\n                {\n                    layer: 's-fighter-weapons-range-from-kj500',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'c-kj500-under-sam-to-surface',\n                    opacity: 0\n                },\n                {\n                    layer: 's-fighter-weapons-range-from-kj500',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'services6',\n            title: '[Carrier Group (H) Sam Range (I), ASM Range (J), Sensing Range to surface (K)]',\n            subtitle: '',\n            image: '',\n            description: `China’s aircraft carriers have the potential to unlock some of these limitations and extend China’s power projection range much further. A carrier group, including the carrier itself, bringing X number of X fighters, but also Y ship and Z has its own missile capabilities and its own sensing capabilities.`,\n            location: {\n                center: [110.09, 10.30],\n                zoom: 4.5,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'h-carrier-group',\n                    opacity: 1\n                },\n                {\n                    layer: 'i-sam-range-from-carrier',\n                    opacity: 1\n                },\n                {\n                    layer: 'j-yj18-asm-range-from-carrier',\n                    opacity: 1\n                },\n                {\n                    layer: 'k-carrier-sensing-range-to-surface',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'h-carrier-group',\n                    opacity: 0\n                },\n                {\n                    layer: 'i-sam-range-from-carrier',\n                    opacity: 0\n                },\n                {\n                    layer: 'j-yj18-asm-range-from-carrier',\n                    opacity: 0\n                },\n                {\n                    layer: 'k-carrier-sensing-range-to-surface',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'inDepth7',\n            title: '[Islands (A) + China (L)]',\n            subtitle: '',\n            image: '',\n            description: `The carrier group is limited by only one thing—the presence of a divert airfield nearby. If the carrier were to sustain damage during combat, fighters in the air would find themselves at extreme risk without the presence of a divert airfield within range. Chinese companies have been involved in a number of airport projects that have been theorized to potentially allow future access, but the four runways in the South China Sea serve as permanent, reliable airfields further from the Chinese mainland.`,\n            location: {\n                center: [97.09, 28.30],\n                zoom: 3.5,\n                pitch: 0.00,\n                bearing: 0.00\n                // speed: 0.02\n            },\n            onChapterEnter: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 1\n                },\n                {\n                    layer: 'l-mainland-china-polygon',\n                    opacity: 1\n                },\n\n            ],\n            onChapterExit: [\n                {\n                    layer: 'a-china-scs-runway-islands',\n                    opacity: 0\n                },\n                {\n                    layer: 'l-mainland-china-polygon',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'inDepth8',\n            title: '[Carrier Group (H), Sensing Range to surface (K)]',\n            subtitle: '',\n            image: '',\n            description: `Fighter aircraft can operate from a carrier group under the radar coverage of the ships themselves, but the range is limited.`,\n            location: {\n                center: [108.09, 8.00],\n                zoom: 5,\n                pitch: 0.00,\n                bearing: 0.00\n                // speed: 0.02\n            },\n            onChapterEnter: [\n                {\n                    layer: 'h-carrier-group',\n                    opacity: 0\n                },\n                {\n                    layer: 'k-carrier-sensing-range-to-surface',\n                    opacity: 1\n                },\n            ],\n            onChapterExit: [\n                {\n                    layer: 'h-carrier-group',\n                    opacity: 0\n                },\n                {\n                    layer: 'k-carrier-sensing-range-to-surface',\n                    opacity: 0\n                },\n            ]\n        },\n        {\n            id: 'inDepth9',\n            title: '[KJ 500 over the carrier group radar range (M) + fighter weapons range from KJ-500 (O)]',\n            subtitle: '',\n            image: '',\n            description: `But a KJ-500 from the islands can make use the carrier group’s missile coverage to safely provide a much wider radar radius. This extends the effective combat range of the fighters by x miles, making it possible to strike locations as far as INDONESIA? under protected radar coverage.`,\n            location: {\n                center: [108.09, 8.00],\n                zoom: 3.5,\n                pitch: 0.00,\n                bearing: 0.00\n                // speed: 0.02\n            },\n            onChapterEnter: [\n                {\n                    layer: 'm-kj500-sensing-to-surface-from-carrier-sam',\n                    opacity: 1\n                },\n                {\n                    layer: 'o-fighter-weapons-range-from-single-carrier-kj500',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'm-kj500-sensing-to-surface-from-carrier-sam',\n                    opacity: 0\n                },\n                {\n                    layer: 'o-fighter-weapons-range-from-single-carrier-kj500',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'inDepth11',\n            title: '[Carrier operational range 400nm from diverts (P)]',\n            subtitle: ``,\n            image: '',\n            description: `Based on divert airfields currently available for Chinese use, China’s aircraft carrier can operate within this range while maintaining a safe 400 nautical mile distance from divert airfields.`,\n            location: {\n                center: [112.09, 24.00],\n                zoom: 3.5,\n                pitch: 0.00,\n                bearing: 0.00\n                // speed: 0.02\n            },\n            onChapterEnter: [\n                {\n                    layer: 'p-carrier-operational-range',\n                    opacity: 1\n                },\n            ],\n            onChapterExit: [\n                {\n                    layer: 'p-carrier-operational-range',\n                    opacity: 0\n                },\n            ]\n        },\n        {\n            id: 'inDepth12',\n            title: '[maximum KJ-500 sensing range from carriers (Q) and maximum fighter weapons range(R)]',\n            subtitle: '',\n            image: '',\n            description: `China’s carrier groups can enable fighter combat operations within this range.`,\n            location: {\n                center: [112.09, 24.00],\n                zoom: 3.0,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'q-kj500-sensing-to-surface-from-carrier',\n                    opacity: 1\n                },\n                {\n                    layer: 'r-fighter-weapons-range-from-kj500-sensing-range',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'q-kj500-sensing-to-surface-from-carrier',\n                    opacity: 0\n                },\n                {\n                    layer: 'r-fighter-weapons-range-from-kj500-sensing-range',\n                    opacity: 0\n                }\n            ]\n        },\n       \n        {\n            id: 'close',\n            location: {\n                center: [110.09, 22.30],\n                zoom: 3.50,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n\n            ],\n            onChapterExit: [\n\n            ]\n        }\n    ]\n};\nexport default config","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport config from './config.js';\n\n\n\nReactDOM.render(<App {...config} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}